[DEFAULT]
maintainer = University of Chicago

[profiles]
base = ^base,chrony,cron,elasticsearch,fluentd,kibana,kolla-toolbox,haproxy,keepalived,letsencrypt,mariadb,memcached,openstack-base,^openvswitch,prometheus,grafana,rabbitmq,redis,tgtd
blazar = ^blazar-
cinder = ^cinder-
doni = ^doni-
glance = ^glance-
gnocchi = ^gnocchi-
heat = ^heat-
horizon = ^horizon$
# Explicitly build entire chain, this build doesn't have a
# 'base' job that provides the base images for it.
horizon_kvm = ^base,^openstack-base,^horizon$
ironic = ^ironic(?!-neutron),dnsmasq,iscsi,prometheus-ironic-exporter
keystone = ^keystone
manila = ^manila-
neutron = ironic-neutron-agent,^neutron-(base|dhcp-agent|l3-agent|metadata-agent|openvswitch-agent|server|wireguard-agent)$,^ovn-
# Same as "neutron" profile but minus wireguard agent, which needs Python 3
neutron_centos7 = ironic-neutron-agent,neutron-(base|dhcp-agent|l3-agent|metadata-agent|openvswitch-agent|server)$
nova = ^nova-
placement = ^placement
tunelo = ^tunelo-
zun = ^zun-

prometheus = ^prometheus
grafana = ^grafana

[blazar-base]
type = git
location = https://github.com/ChameleonCloud/blazar.git
reference = chameleoncloud/{{ openstack_release }}

[blazar-manager-additions-extra]
type = local
location = $locals_base/additions.tar

[cinder-base]
type = url
location = $tarballs_base/cinder/cinder-stable-{{ openstack_release }}.tar.gz

[cyborg-base]
type = git
location = https://github.com/ChameleonCloud/cyborg.git
reference = chameleoncloud/{{ openstack_release }}

[doni-base]
type = git
location = https://github.com/ChameleonCloud/doni.git
reference = chameleoncloud/{{ openstack_release }}

# NOTE(jason): Gnocchi uses 4.3 as that's the closest to xena; consider updating
# when we move past xena on the base.
[gnocchi-base]
type = git
reference = stable/4.3
location = https://github.com/gnocchixyz/gnocchi.git

[heat-base]
type = git
location = https://github.com/ChameleonCloud/heat.git
reference = chameleoncloud/{{ openstack_release }}

[horizon-additions-theme-chameleoncloud]
type = git
location = https://github.com/ChameleonCloud/horizon-theme.git
reference = master

{# Only override default horizon builds if we're building NOT for KVM;
   The KVM build should use the default Horizon build, as we customize the
   GUI for the bare metal use case significantly. #}
{% if "horizon_kvm" not in profiles %}
[horizon]
type = git
location = https://github.com/ChameleonCloud/horizon.git
reference = chameleoncloud/{{ openstack_release }}

[horizon-plugin-blazar-dashboard]
type = git
location = https://github.com/ChameleonCloud/blazar-dashboard.git
reference = chameleoncloud/{{ openstack_release }}

[horizon-plugin-heat-dashboard]
type = git
location = https://github.com/ChameleonCloud/heat-dashboard.git
reference = chameleoncloud/{{ openstack_release }}

[horizon-plugin-zun-ui]
type = git
location = https://github.com/ChameleonCloud/zun-ui.git
reference = stable/{{ openstack_release }}
{% endif %}

[ironic-base]
type = git
location = https://github.com/ChameleonCloud/ironic.git
reference = chameleoncloud/{{ openstack_release }}

[keystone-base]
type = git
location = https://github.com/ChameleonCloud/keystone.git
reference = chameleoncloud/{{ openstack_release }}

[neutron-base]
type = git
location = https://github.com/ChameleonCloud/neutron.git
reference = chameleoncloud/{{ openstack_release }}

[neutron-base-plugin-networking-generic-switch]
type = git
location = https://github.com/ChameleonCloud/networking-generic-switch.git
reference = chameleoncloud/{{ openstack_release }}

{% if enable_networking_wireguard %}
[neutron-base-plugin-networking-wireguard]
type = git
location = https://github.com/ChameleonCloud/networking-wireguard.git
reference = chameleoncloud/{{ openstack_release }}
{% endif %}

[neutron-server-additions-extra]
type = local
location = $locals_base/additions.tar

[nova-base]
type = git
location = https://github.com/ChameleonCloud/nova.git
reference = chameleoncloud/{{ openstack_release }}

[nova-base-plugin-blazar]
type = git
location = https://github.com/ChameleonCloud/blazar-nova.git
reference = chameleoncloud/{{ openstack_release }}

[tunelo-base]
type = git
location = https://github.com/ChameleonCloud/tunelo.git
reference = chameleoncloud/{{ openstack_release }}

[zun-base]
type = git
location = https://github.com/ChameleonCloud/zun.git
reference = chameleoncloud/{{ openstack_release }}
